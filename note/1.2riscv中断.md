# riscv中断

中断机制，就是处理器在顺序执行指令流的过程中突然被别的请求打断而终止执行当前的指令，转而去处理别的事情，等到其处理完了所有的事情之后，再次回到程序中断的执行点继续执行当前的指令流程。

中断也是需要硬件和内核合作完成的

## 中断类型
- 外部中断
- 内部中断（计时器中断，软件中断）

## timer interrupts --- 计时器中断

## 内部中断器
- CLINT 是一个硬件
- 我们使用的virt虚拟机是仿照了U540开发板进行使用的
- 映射在内存 0x02000000 的地址上

## 内部中断 使用CLINT 采用MMIO映射方式访问CLINT中间的寄存器
- 计时器中断可以用于产生系统tick
- 核间中断用于不同CPU核之间的通信


## 软件中断
- 软件中断是一条CPU指令，用以自陷一个中断。由于软件中断指令通常要运行一个切换CPU至内核态的子例程，它通常被用作实现系统调用。
- 比如要调用一个系统功能（如wirte向屏幕输出）
- 系统调用的时候采用了ecall指令进行跳转，跳转到stvec寄存器所指向的指令
